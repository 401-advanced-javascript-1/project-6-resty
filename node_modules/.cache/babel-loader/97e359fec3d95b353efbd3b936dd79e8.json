{"ast":null,"code":"import _objectSpread from \"/Users/Admin/Documents/401/project-6-resty/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nvar _jsxFileName = \"/Users/Admin/Documents/401/project-6-resty/src/components/resty/index.js\";\nimport './resty.css';\nimport React from 'react';\nimport superagent from 'superagent';\nimport ReactJson from 'react-json-view';\nimport md5 from 'md5';\nimport History from '../history/History.js';\nimport Form from '../Form.js';\n\nclass RESTy extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.saveHistory = () => {\n      localStorage.setItem('history', JSON.stringify(this.state.history));\n    };\n\n    this.updateHistory = () => {\n      let url = new URL(this.state.url);\n      let lastRun = {\n        host: url.hostname,\n        path: url.pathname,\n        url: this.state.url,\n        method: this.state.method,\n        requestBody: this.state.requestBody,\n        username: this.state.username,\n        password: this.state.password,\n        token: this.state.token,\n        body: {},\n        header: {}\n      };\n      let key = md5(JSON.stringify(lastRun));\n      let entry = {\n        [key]: lastRun\n      };\n\n      let history = _objectSpread({}, this.state.history, entry);\n\n      this.setState({\n        history\n      });\n      this.saveHistory();\n    };\n\n    this.resetFormFromHistory = event => {\n      event.preventDefault();\n      let newState = this.state.history[event.currentTarget.id];\n      this.setState(_objectSpread({}, newState));\n    };\n\n    this.handleChange = event => {\n      let prop = event.target.name;\n      let value = event.target.value;\n      this.setState({\n        [prop]: value\n      }); // If basic/bearer, clear the other\n\n      if (prop === 'token') {\n        let username = '';\n        let password = '';\n        this.setState({\n          username,\n          password\n        });\n      }\n\n      if (prop.match(/username|password/)) {\n        let token = '';\n        this.setState({\n          token\n        });\n      }\n    };\n\n    this.toggleHeaders = () => {\n      let headersVisible = !this.state.headersVisible;\n      this.setState({\n        headersVisible\n      });\n    };\n\n    this.callAPI = event => {\n      event.preventDefault();\n      let contentType = {\n        'Content-Type': 'application/json'\n      };\n      let bearer = this.state.token ? {\n        Authorization: \"Bearer \".concat(this.state.token)\n      } : {};\n      let basic = this.state.username && this.state.password ? {\n        Authorization: 'Basic ' + btoa(\"\".concat(this.state.username, \":\").concat(this.state.password))\n      } : {};\n      superagent(this.state.method, this.state.url).set('Content-Type', 'application/json').set(Object.assign(contentType, bearer, basic)).send(this.state.requestBody).then(response => {\n        let header = response.header;\n        let body = response.body;\n        this.setState({\n          header,\n          body\n        });\n        this.updateHistory();\n      }).catch(e => {\n        let body = {\n          error: e.message\n        };\n        let header = {};\n        this.setState({\n          header,\n          body\n        });\n      });\n    };\n\n    this.state = {\n      url: 'https://swapi.co/api/people',\n      method: 'get',\n      requestBody: '',\n      username: '',\n      password: '',\n      token: '',\n      header: {},\n      body: {},\n      history: {},\n      headersVisible: false\n    };\n  }\n\n  componentDidMount() {\n    try {\n      let history = JSON.parse(localStorage.getItem('history'));\n      this.setState({\n        history\n      });\n    } catch (e) {\n      console.error(e);\n    }\n  }\n\n  render() {\n    return React.createElement(\"main\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, React.createElement(History, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }), React.createElement(Form, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }), React.createElement(\"section\", {\n      className: \"deck\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      onSubmit: this.callAPI,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, React.createElement(\"section\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      className: \"wide\",\n      name: \"url\",\n      placeholder: \"URL\",\n      value: this.state.url,\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      id: \"methods\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"radio\",\n      name: \"method\",\n      checked: this.state.method === 'get' ? true : false,\n      value: \"get\",\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, \"GET\")), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"radio\",\n      name: \"method\",\n      checked: this.state.method === 'post' ? true : false,\n      value: \"post\",\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, \"POST\")), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"radio\",\n      name: \"method\",\n      checked: this.state.method === 'put' ? true : false,\n      value: \"put\",\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    }, \"PUT\")), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"radio\",\n      name: \"method\",\n      checked: this.state.method === 'patch' ? true : false,\n      value: \"patch\",\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }, \"PATCH\")), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"radio\",\n      name: \"method\",\n      checked: this.state.method === 'delete' ? true : false,\n      value: \"delete\",\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    }, \"DELETE\")), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    }, \"Go!\")))), React.createElement(\"section\", {\n      className: \"deck col-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"body\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218\n      },\n      __self: this\n    }, React.createElement(\"textarea\", {\n      placeholder: \"Raw JSON Body\",\n      name: \"requestBody\",\n      onChange: this.handleChange,\n      value: this.state.requestBody,\n      disabled: this.state.method.match(/get|delete/) ? true : false,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      id: \"headers\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      href: \"#\",\n      onClick: this.toggleHeaders,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231\n      },\n      __self: this\n    }, \"Headers\"), React.createElement(\"div\", {\n      className: 'visible-' + this.state.headersVisible,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235\n      },\n      __self: this\n    }, \"Basic Authorization\"), React.createElement(\"input\", {\n      onChange: this.handleChange,\n      name: \"username\",\n      placeholder: \"Username\",\n      value: this.state.username,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      onChange: this.handleChange,\n      name: \"password\",\n      type: \"password\",\n      placeholder: \"Password\",\n      value: this.state.password,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: 'visible-' + this.state.headersVisible,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251\n      },\n      __self: this\n    }, \"Bearer Token\"), React.createElement(\"input\", {\n      onChange: this.handleChange,\n      type: \"text\",\n      className: \"wide\",\n      name: \"token\",\n      placeholder: \"Token\",\n      value: this.state.token,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252\n      },\n      __self: this\n    }))))), React.createElement(\"div\", {\n      id: \"json\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264\n      },\n      __self: this\n    }, React.createElement(ReactJson, {\n      name: \"Headers\",\n      enableClipboard: false,\n      collapsed: true,\n      src: this.state.header,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265\n      },\n      __self: this\n    }), React.createElement(ReactJson, {\n      name: \"Response\",\n      enableClipboard: false,\n      collapsed: false,\n      src: this.state.body,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271\n      },\n      __self: this\n    }))));\n  }\n\n}\n\nexport default RESTy;","map":{"version":3,"sources":["/Users/Admin/Documents/401/project-6-resty/src/components/resty/index.js"],"names":["React","superagent","ReactJson","md5","History","Form","RESTy","Component","constructor","props","saveHistory","localStorage","setItem","JSON","stringify","state","history","updateHistory","url","URL","lastRun","host","hostname","path","pathname","method","requestBody","username","password","token","body","header","key","entry","setState","resetFormFromHistory","event","preventDefault","newState","currentTarget","id","handleChange","prop","target","name","value","match","toggleHeaders","headersVisible","callAPI","contentType","bearer","Authorization","basic","btoa","set","Object","assign","send","then","response","catch","e","error","message","componentDidMount","parse","getItem","console","render"],"mappings":";;AAAA,OAAO,aAAP;AAEA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,UAAP,MAAuB,YAAvB;AACA,OAAOC,SAAP,MAAsB,iBAAtB;AACA,OAAOC,GAAP,MAAgB,KAAhB;AACA,OAAOC,OAAP,MAAoB,uBAApB;AACA,OAAOC,IAAP,MAAiB,YAAjB;;AAEA,MAAMC,KAAN,SAAoBN,KAAK,CAACO,SAA1B,CAAoC;AAClCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;;AADiB,SAyBnBC,WAzBmB,GAyBL,MAAM;AAClBC,MAAAA,YAAY,CAACC,OAAb,CAAqB,SAArB,EAAgCC,IAAI,CAACC,SAAL,CAAe,KAAKC,KAAL,CAAWC,OAA1B,CAAhC;AACD,KA3BkB;;AAAA,SA6BnBC,aA7BmB,GA6BH,MAAM;AACpB,UAAIC,GAAG,GAAG,IAAIC,GAAJ,CAAQ,KAAKJ,KAAL,CAAWG,GAAnB,CAAV;AAEA,UAAIE,OAAO,GAAG;AACZC,QAAAA,IAAI,EAAEH,GAAG,CAACI,QADE;AAEZC,QAAAA,IAAI,EAAEL,GAAG,CAACM,QAFE;AAGZN,QAAAA,GAAG,EAAE,KAAKH,KAAL,CAAWG,GAHJ;AAIZO,QAAAA,MAAM,EAAE,KAAKV,KAAL,CAAWU,MAJP;AAKZC,QAAAA,WAAW,EAAE,KAAKX,KAAL,CAAWW,WALZ;AAMZC,QAAAA,QAAQ,EAAE,KAAKZ,KAAL,CAAWY,QANT;AAOZC,QAAAA,QAAQ,EAAE,KAAKb,KAAL,CAAWa,QAPT;AAQZC,QAAAA,KAAK,EAAE,KAAKd,KAAL,CAAWc,KARN;AASZC,QAAAA,IAAI,EAAE,EATM;AAUZC,QAAAA,MAAM,EAAE;AAVI,OAAd;AAaA,UAAIC,GAAG,GAAG7B,GAAG,CAACU,IAAI,CAACC,SAAL,CAAeM,OAAf,CAAD,CAAb;AACA,UAAIa,KAAK,GAAG;AAAE,SAACD,GAAD,GAAOZ;AAAT,OAAZ;;AACA,UAAIJ,OAAO,qBAAQ,KAAKD,KAAL,CAAWC,OAAnB,EAA+BiB,KAA/B,CAAX;;AACA,WAAKC,QAAL,CAAc;AAAElB,QAAAA;AAAF,OAAd;AACA,WAAKN,WAAL;AACD,KAlDkB;;AAAA,SAoDnByB,oBApDmB,GAoDIC,KAAK,IAAI;AAC9BA,MAAAA,KAAK,CAACC,cAAN;AACA,UAAIC,QAAQ,GAAG,KAAKvB,KAAL,CAAWC,OAAX,CAAmBoB,KAAK,CAACG,aAAN,CAAoBC,EAAvC,CAAf;AACA,WAAKN,QAAL,mBAAmBI,QAAnB;AACD,KAxDkB;;AAAA,SA0DnBG,YA1DmB,GA0DJL,KAAK,IAAI;AACtB,UAAIM,IAAI,GAAGN,KAAK,CAACO,MAAN,CAAaC,IAAxB;AACA,UAAIC,KAAK,GAAGT,KAAK,CAACO,MAAN,CAAaE,KAAzB;AACA,WAAKX,QAAL,CAAc;AAAE,SAACQ,IAAD,GAAQG;AAAV,OAAd,EAHsB,CAKtB;;AACA,UAAIH,IAAI,KAAK,OAAb,EAAsB;AACpB,YAAIf,QAAQ,GAAG,EAAf;AACA,YAAIC,QAAQ,GAAG,EAAf;AACA,aAAKM,QAAL,CAAc;AAAEP,UAAAA,QAAF;AAAYC,UAAAA;AAAZ,SAAd;AACD;;AAED,UAAIc,IAAI,CAACI,KAAL,CAAW,mBAAX,CAAJ,EAAqC;AACnC,YAAIjB,KAAK,GAAG,EAAZ;AACA,aAAKK,QAAL,CAAc;AAAEL,UAAAA;AAAF,SAAd;AACD;AACF,KA1EkB;;AAAA,SA4EnBkB,aA5EmB,GA4EH,MAAM;AACpB,UAAIC,cAAc,GAAG,CAAC,KAAKjC,KAAL,CAAWiC,cAAjC;AACA,WAAKd,QAAL,CAAc;AAAEc,QAAAA;AAAF,OAAd;AACD,KA/EkB;;AAAA,SAiFnBC,OAjFmB,GAiFTb,KAAK,IAAI;AACjBA,MAAAA,KAAK,CAACC,cAAN;AAEA,UAAIa,WAAW,GAAG;AAAE,wBAAgB;AAAlB,OAAlB;AACA,UAAIC,MAAM,GAAG,KAAKpC,KAAL,CAAWc,KAAX,GACT;AAAEuB,QAAAA,aAAa,mBAAY,KAAKrC,KAAL,CAAWc,KAAvB;AAAf,OADS,GAET,EAFJ;AAGA,UAAIwB,KAAK,GACP,KAAKtC,KAAL,CAAWY,QAAX,IAAuB,KAAKZ,KAAL,CAAWa,QAAlC,GACI;AACEwB,QAAAA,aAAa,EACX,WAAWE,IAAI,WAAI,KAAKvC,KAAL,CAAWY,QAAf,cAA2B,KAAKZ,KAAL,CAAWa,QAAtC;AAFnB,OADJ,GAKI,EANN;AAQA3B,MAAAA,UAAU,CAAC,KAAKc,KAAL,CAAWU,MAAZ,EAAoB,KAAKV,KAAL,CAAWG,GAA/B,CAAV,CACGqC,GADH,CACO,cADP,EACuB,kBADvB,EAEGA,GAFH,CAEOC,MAAM,CAACC,MAAP,CAAcP,WAAd,EAA2BC,MAA3B,EAAmCE,KAAnC,CAFP,EAGGK,IAHH,CAGQ,KAAK3C,KAAL,CAAWW,WAHnB,EAIGiC,IAJH,CAIQC,QAAQ,IAAI;AAChB,YAAI7B,MAAM,GAAG6B,QAAQ,CAAC7B,MAAtB;AACA,YAAID,IAAI,GAAG8B,QAAQ,CAAC9B,IAApB;AACA,aAAKI,QAAL,CAAc;AAAEH,UAAAA,MAAF;AAAUD,UAAAA;AAAV,SAAd;AACA,aAAKb,aAAL;AACD,OATH,EAUG4C,KAVH,CAUSC,CAAC,IAAI;AACV,YAAIhC,IAAI,GAAG;AAAEiC,UAAAA,KAAK,EAAED,CAAC,CAACE;AAAX,SAAX;AACA,YAAIjC,MAAM,GAAG,EAAb;AACA,aAAKG,QAAL,CAAc;AAAEH,UAAAA,MAAF;AAAUD,UAAAA;AAAV,SAAd;AACD,OAdH;AAeD,KA/GkB;;AAEjB,SAAKf,KAAL,GAAa;AACXG,MAAAA,GAAG,EAAE,6BADM;AAEXO,MAAAA,MAAM,EAAE,KAFG;AAGXC,MAAAA,WAAW,EAAE,EAHF;AAIXC,MAAAA,QAAQ,EAAE,EAJC;AAKXC,MAAAA,QAAQ,EAAE,EALC;AAMXC,MAAAA,KAAK,EAAE,EANI;AAOXE,MAAAA,MAAM,EAAE,EAPG;AAQXD,MAAAA,IAAI,EAAE,EARK;AASXd,MAAAA,OAAO,EAAE,EATE;AAUXgC,MAAAA,cAAc,EAAE;AAVL,KAAb;AAYD;;AAEDiB,EAAAA,iBAAiB,GAAG;AAClB,QAAI;AACF,UAAIjD,OAAO,GAAGH,IAAI,CAACqD,KAAL,CAAWvD,YAAY,CAACwD,OAAb,CAAqB,SAArB,CAAX,CAAd;AACA,WAAKjC,QAAL,CAAc;AAAElB,QAAAA;AAAF,OAAd;AACD,KAHD,CAGE,OAAO8C,CAAP,EAAU;AACVM,MAAAA,OAAO,CAACL,KAAR,CAAcD,CAAd;AACD;AACF;;AA0FDO,EAAAA,MAAM,GAAG;AACP,WACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEE,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,EAoBE,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MApBF,EAsBE;AAAS,MAAA,SAAS,EAAC,MAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAM,MAAA,QAAQ,EAAE,KAAKpB,OAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AACE,MAAA,IAAI,EAAC,MADP;AAEE,MAAA,SAAS,EAAC,MAFZ;AAGE,MAAA,IAAI,EAAC,KAHP;AAIE,MAAA,WAAW,EAAC,KAJd;AAKE,MAAA,KAAK,EAAE,KAAKlC,KAAL,CAAWG,GALpB;AAME,MAAA,QAAQ,EAAE,KAAKuB,YANjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAUE;AAAK,MAAA,EAAE,EAAC,SAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AACE,MAAA,IAAI,EAAC,OADP;AAEE,MAAA,IAAI,EAAC,QAFP;AAGE,MAAA,OAAO,EAAE,KAAK1B,KAAL,CAAWU,MAAX,KAAsB,KAAtB,GAA8B,IAA9B,GAAqC,KAHhD;AAIE,MAAA,KAAK,EAAC,KAJR;AAKE,MAAA,QAAQ,EAAE,KAAKgB,YALjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAQE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aARF,CADF,EAWE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AACE,MAAA,IAAI,EAAC,OADP;AAEE,MAAA,IAAI,EAAC,QAFP;AAGE,MAAA,OAAO,EAAE,KAAK1B,KAAL,CAAWU,MAAX,KAAsB,MAAtB,GAA+B,IAA/B,GAAsC,KAHjD;AAIE,MAAA,KAAK,EAAC,MAJR;AAKE,MAAA,QAAQ,EAAE,KAAKgB,YALjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAQE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cARF,CAXF,EAqBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AACE,MAAA,IAAI,EAAC,OADP;AAEE,MAAA,IAAI,EAAC,QAFP;AAGE,MAAA,OAAO,EAAE,KAAK1B,KAAL,CAAWU,MAAX,KAAsB,KAAtB,GAA8B,IAA9B,GAAqC,KAHhD;AAIE,MAAA,KAAK,EAAC,KAJR;AAKE,MAAA,QAAQ,EAAE,KAAKgB,YALjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAQE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aARF,CArBF,EA+BE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AACE,MAAA,IAAI,EAAC,OADP;AAEE,MAAA,IAAI,EAAC,QAFP;AAGE,MAAA,OAAO,EAAE,KAAK1B,KAAL,CAAWU,MAAX,KAAsB,OAAtB,GAAgC,IAAhC,GAAuC,KAHlD;AAIE,MAAA,KAAK,EAAC,OAJR;AAKE,MAAA,QAAQ,EAAE,KAAKgB,YALjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAQE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eARF,CA/BF,EAyCE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AACE,MAAA,IAAI,EAAC,OADP;AAEE,MAAA,IAAI,EAAC,QAFP;AAGE,MAAA,OAAO,EAAE,KAAK1B,KAAL,CAAWU,MAAX,KAAsB,QAAtB,GAAiC,IAAjC,GAAwC,KAHnD;AAIE,MAAA,KAAK,EAAC,QAJR;AAKE,MAAA,QAAQ,EAAE,KAAKgB,YALjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAQE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBARF,CAzCF,EAmDE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAQ,MAAA,IAAI,EAAC,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADF,CAnDF,CAVF,CADF,EAoEE;AAAS,MAAA,SAAS,EAAC,YAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,EAAE,EAAC,MAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AACE,MAAA,WAAW,EAAC,eADd;AAEE,MAAA,IAAI,EAAC,aAFP;AAGE,MAAA,QAAQ,EAAE,KAAKA,YAHjB;AAIE,MAAA,KAAK,EAAE,KAAK1B,KAAL,CAAWW,WAJpB;AAKE,MAAA,QAAQ,EACN,KAAKX,KAAL,CAAWU,MAAX,CAAkBqB,KAAlB,CAAwB,YAAxB,IAAwC,IAAxC,GAA+C,KANnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADF,EAaE;AAAK,MAAA,EAAE,EAAC,SAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAG,MAAA,IAAI,EAAC,GAAR;AAAY,MAAA,OAAO,EAAE,KAAKC,aAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,EAIE;AAAK,MAAA,SAAS,EAAE,aAAa,KAAKhC,KAAL,CAAWiC,cAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BADF,EAEE;AACE,MAAA,QAAQ,EAAE,KAAKP,YADjB;AAEE,MAAA,IAAI,EAAC,UAFP;AAGE,MAAA,WAAW,EAAC,UAHd;AAIE,MAAA,KAAK,EAAE,KAAK1B,KAAL,CAAWY,QAJpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,EAQE;AACE,MAAA,QAAQ,EAAE,KAAKc,YADjB;AAEE,MAAA,IAAI,EAAC,UAFP;AAGE,MAAA,IAAI,EAAC,UAHP;AAIE,MAAA,WAAW,EAAC,UAJd;AAKE,MAAA,KAAK,EAAE,KAAK1B,KAAL,CAAWa,QALpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MARF,CAJF,EAoBE;AAAK,MAAA,SAAS,EAAE,aAAa,KAAKb,KAAL,CAAWiC,cAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,EAEE;AACE,MAAA,QAAQ,EAAE,KAAKP,YADjB;AAEE,MAAA,IAAI,EAAC,MAFP;AAGE,MAAA,SAAS,EAAC,MAHZ;AAIE,MAAA,IAAI,EAAC,OAJP;AAKE,MAAA,WAAW,EAAC,OALd;AAME,MAAA,KAAK,EAAE,KAAK1B,KAAL,CAAWc,KANpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,CApBF,CAbF,CApEF,CADF,EAoHE;AAAK,MAAA,EAAE,EAAC,MAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,SAAD;AACE,MAAA,IAAI,EAAC,SADP;AAEE,MAAA,eAAe,EAAE,KAFnB;AAGE,MAAA,SAAS,EAAE,IAHb;AAIE,MAAA,GAAG,EAAE,KAAKd,KAAL,CAAWgB,MAJlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAOE,oBAAC,SAAD;AACE,MAAA,IAAI,EAAC,UADP;AAEE,MAAA,eAAe,EAAE,KAFnB;AAGE,MAAA,SAAS,EAAE,KAHb;AAIE,MAAA,GAAG,EAAE,KAAKhB,KAAL,CAAWe,IAJlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAPF,CApHF,CAtBF,CADF;AA4JD;;AA/QiC;;AAkRpC,eAAexB,KAAf","sourcesContent":["import './resty.css';\n\nimport React from 'react';\nimport superagent from 'superagent';\nimport ReactJson from 'react-json-view';\nimport md5 from 'md5';\nimport History from '../history/History.js';\nimport Form from '../Form.js';\n\nclass RESTy extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      url: 'https://swapi.co/api/people',\n      method: 'get',\n      requestBody: '',\n      username: '',\n      password: '',\n      token: '',\n      header: {},\n      body: {},\n      history: {},\n      headersVisible: false,\n    };\n  }\n\n  componentDidMount() {\n    try {\n      let history = JSON.parse(localStorage.getItem('history'));\n      this.setState({ history });\n    } catch (e) {\n      console.error(e);\n    }\n  }\n\n  saveHistory = () => {\n    localStorage.setItem('history', JSON.stringify(this.state.history));\n  };\n\n  updateHistory = () => {\n    let url = new URL(this.state.url);\n\n    let lastRun = {\n      host: url.hostname,\n      path: url.pathname,\n      url: this.state.url,\n      method: this.state.method,\n      requestBody: this.state.requestBody,\n      username: this.state.username,\n      password: this.state.password,\n      token: this.state.token,\n      body: {},\n      header: {},\n    };\n\n    let key = md5(JSON.stringify(lastRun));\n    let entry = { [key]: lastRun };\n    let history = { ...this.state.history, ...entry };\n    this.setState({ history });\n    this.saveHistory();\n  };\n\n  resetFormFromHistory = event => {\n    event.preventDefault();\n    let newState = this.state.history[event.currentTarget.id];\n    this.setState({ ...newState });\n  };\n\n  handleChange = event => {\n    let prop = event.target.name;\n    let value = event.target.value;\n    this.setState({ [prop]: value });\n\n    // If basic/bearer, clear the other\n    if (prop === 'token') {\n      let username = '';\n      let password = '';\n      this.setState({ username, password });\n    }\n\n    if (prop.match(/username|password/)) {\n      let token = '';\n      this.setState({ token });\n    }\n  };\n\n  toggleHeaders = () => {\n    let headersVisible = !this.state.headersVisible;\n    this.setState({ headersVisible });\n  };\n\n  callAPI = event => {\n    event.preventDefault();\n\n    let contentType = { 'Content-Type': 'application/json' };\n    let bearer = this.state.token\n      ? { Authorization: `Bearer ${this.state.token}` }\n      : {};\n    let basic =\n      this.state.username && this.state.password\n        ? {\n            Authorization:\n              'Basic ' + btoa(`${this.state.username}:${this.state.password}`),\n          }\n        : {};\n\n    superagent(this.state.method, this.state.url)\n      .set('Content-Type', 'application/json')\n      .set(Object.assign(contentType, bearer, basic))\n      .send(this.state.requestBody)\n      .then(response => {\n        let header = response.header;\n        let body = response.body;\n        this.setState({ header, body });\n        this.updateHistory();\n      })\n      .catch(e => {\n        let body = { error: e.message };\n        let header = {};\n        this.setState({ header, body });\n      });\n  };\n\n  render() {\n    return (\n      <main>\n\n        <History />\n\n        {/* <aside>\n          <h2>History</h2>\n          <ul id=\"history\">\n            {this.state.history &&\n              Object.keys(this.state.history).map(key => (\n                <li key={key} id={key} onClick={this.resetFormFromHistory}>\n                  <span>\n                    <strong>{this.state.history[key].method}</strong>\n                  </span>\n                  <span>{this.state.history[key].host}</span>\n                  <span>{this.state.history[key].path}</span>\n                </li>\n              ))}\n          </ul>\n        </aside> */}\n\n        <Form />\n\n        <section className=\"deck\">\n          <form onSubmit={this.callAPI}>\n            <section>\n              <input\n                type=\"text\"\n                className=\"wide\"\n                name=\"url\"\n                placeholder=\"URL\"\n                value={this.state.url}\n                onChange={this.handleChange}\n              />\n\n              <div id=\"methods\">\n                <label>\n                  <input\n                    type=\"radio\"\n                    name=\"method\"\n                    checked={this.state.method === 'get' ? true : false}\n                    value=\"get\"\n                    onChange={this.handleChange}\n                  />\n                  <span>GET</span>\n                </label>\n                <label>\n                  <input\n                    type=\"radio\"\n                    name=\"method\"\n                    checked={this.state.method === 'post' ? true : false}\n                    value=\"post\"\n                    onChange={this.handleChange}\n                  />\n                  <span>POST</span>\n                </label>\n                <label>\n                  <input\n                    type=\"radio\"\n                    name=\"method\"\n                    checked={this.state.method === 'put' ? true : false}\n                    value=\"put\"\n                    onChange={this.handleChange}\n                  />\n                  <span>PUT</span>\n                </label>\n                <label>\n                  <input\n                    type=\"radio\"\n                    name=\"method\"\n                    checked={this.state.method === 'patch' ? true : false}\n                    value=\"patch\"\n                    onChange={this.handleChange}\n                  />\n                  <span>PATCH</span>\n                </label>\n                <label>\n                  <input\n                    type=\"radio\"\n                    name=\"method\"\n                    checked={this.state.method === 'delete' ? true : false}\n                    value=\"delete\"\n                    onChange={this.handleChange}\n                  />\n                  <span>DELETE</span>\n                </label>\n                <label>\n                  <button type=\"submit\">Go!</button>\n                </label>\n              </div>\n            </section>\n\n            <section className=\"deck col-2\">\n              <div id=\"body\">\n                <textarea\n                  placeholder=\"Raw JSON Body\"\n                  name=\"requestBody\"\n                  onChange={this.handleChange}\n                  value={this.state.requestBody}\n                  disabled={\n                    this.state.method.match(/get|delete/) ? true : false\n                  }\n                />\n              </div>\n\n              <div id=\"headers\">\n                <a href=\"#\" onClick={this.toggleHeaders}>\n                  Headers\n                </a>\n                <div className={'visible-' + this.state.headersVisible}>\n                  <h2>Basic Authorization</h2>\n                  <input\n                    onChange={this.handleChange}\n                    name=\"username\"\n                    placeholder=\"Username\"\n                    value={this.state.username}\n                  />\n                  <input\n                    onChange={this.handleChange}\n                    name=\"password\"\n                    type=\"password\"\n                    placeholder=\"Password\"\n                    value={this.state.password}\n                  />\n                </div>\n                <div className={'visible-' + this.state.headersVisible}>\n                  <h2>Bearer Token</h2>\n                  <input\n                    onChange={this.handleChange}\n                    type=\"text\"\n                    className=\"wide\"\n                    name=\"token\"\n                    placeholder=\"Token\"\n                    value={this.state.token}\n                  />\n                </div>\n              </div>\n            </section>\n          </form>\n          <div id=\"json\">\n            <ReactJson\n              name=\"Headers\"\n              enableClipboard={false}\n              collapsed={true}\n              src={this.state.header}\n            />\n            <ReactJson\n              name=\"Response\"\n              enableClipboard={false}\n              collapsed={false}\n              src={this.state.body}\n            />\n          </div>\n        </section>\n      </main>\n    );\n  }\n}\n\nexport default RESTy;\n"]},"metadata":{},"sourceType":"module"}